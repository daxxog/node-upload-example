/* NodeUploadExample
 * basic upload server example
 * (c) 2014 David (daXXog) Volm ><> + + + <><
 * Released under Apache License, Version 2.0:
 * http://www.apache.org/licenses/LICENSE-2.0.html  
 */ !function(e,o){"object"==typeof exports?module.exports=o():"function"==typeof define&&define.amd?define(o):e.NodeUploadExample=o()}(this,function(){var e=require("express"),o=require("fstream"),n=require("fs"),t=require("connect-busboy"),i=e.Router();return i.use(t()),i.post("/",function(e,t){"undefined"!=typeof e.busboy?(e.busboy.on("file",function(e,i,s,p,r){i.pipe(o.Writer({path:"example.dat"})),n.writeFile("example.mime",r),t.json("ok")}),e.pipe(e.busboy)):t.json("req.busboy undefined")}),i.get("/",function(e,o){n.existsSync("example.dat")&&n.existsSync("example.mime")?o.sendFile("example.dat",{root:process.cwd(),headers:{"Content-Type":n.readFileSync("example.mime")}}):o.json("example.dat || example.mime do not exist")}),i});